import React from 'react';
import { View, StyleSheet } from 'react-native';
import { Loading } from '../../SRN';

export default function loading(target) {
    /*
    * 改写 target 的 render 方法
    * */
    const render = target.prototype.render;
    const _render = function () {
        return (
            <View style={styles.container}>
                {render.apply(this)}
                <Loading ref={(component) => { target.loadingComponent = component;}}/>
            </View>
        );
    };
    target.prototype.render = _render;
    target.prototype.loading = {};

    /*
    * target 的原型上挂上 show/hide 方法
    * */
    target.prototype.loading.show = function (text) {
        target.loadingComponent && target.loadingComponent.show(text);
    };
    target.prototype.loading.hide = function () {
        target.loadingComponent && target.loadingComponent.hide();
    };
}

const styles = StyleSheet.create({
    container: {flex: 1}
});