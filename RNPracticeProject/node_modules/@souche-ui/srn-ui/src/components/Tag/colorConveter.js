/**
 * 原色根据背景色和自身透明度转视觉色
 * @param {number} source 原色
 * @param {number} alpha 透明度
 * @param {number} bg 背景原色
 * @return {number} 转换后的视觉色
 */
function colorPipe(source, alpha, bg) {
    return ((1 - alpha) * bg) + alpha * source;
}

function padStart(str) {
    return ('0' + str).slice(-2);
}

/**
 * 主色转标签背景色
 * @param {string} primaryHex 主色
 * @return {string} 标签背景色
 */
export function primaryToBackgroundColor(primaryHex) {
    let resultHex = '#';
    primaryHex = primaryHex.replace('#', '');
    for (let i = 0; i < 6; i += 2) {
        const n = primaryHex.substr(i, 2);
        resultHex += padStart(Math.floor(colorPipe(parseInt(n, 16), 0.1, 255)).toString(16));
    }
    return resultHex;
}