/**
 *  @desc 跟APP交互库的封装
 */
import {
    DeviceEventEmitter,
    NativeModules
} from 'react-native';

import SRNEventManager from './SRNEventManager';

export default {
    getAppData:function(cb){
        NativeModules.SCCRNAppData.getAppData(function(err,data) {
            if(err){
                // TODO 怎么处理
            }
            SRNEventManager.emit('global_app_data_change', data);
            cb && cb(null,data);
        });
    },
    reLogin:function(cb) {

        NativeModules.SCCRNOpenVCBridge.OpenVCBridge({
            protocol: global.LOGIN_PROTOCOL || ''
        }, (cb) => {

        });

        DeviceEventEmitter.addListener('RefreshLoginEvent', (event) => {
            this.getAppData(()=>{
                cb && cb();
            });
        });
    },

}

