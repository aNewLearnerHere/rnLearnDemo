import {EventEmitter} from 'fbemitter';

const emitter = new EventEmitter();

class SRNEventEmitter {
    eventList = {

    }

    /**
     * 加载事件列表，不在列表的事件不会被监听，防止随意使用事件
     * @param eventList
     */
    load(eventList) {
        this.eventList = Object.assign(this.eventList,eventList);
    }

    /**
     * 触发某个事件
     * @param eventName
     * @param params
     */
    emit (eventName, params) {
        console.log("event emit:"+eventName,params);
        emitter.emit(eventName, params);
    }

    /**
     * 监听某个事件
     * @param eventName
     * @param callback
     */
    addListener (eventName, callback) {
        if(!this.eventList[eventName]) {
            console.error(`绑定了没有定义的事件，请在event列表中添加再绑定，事件名：${eventName}`);
            return ;
        }
        emitter.addListener(eventName, callback);
    }
}

const SRNEventManager = new SRNEventEmitter();
export default SRNEventManager;