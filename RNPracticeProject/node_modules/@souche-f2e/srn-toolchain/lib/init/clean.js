'use strict';

const execSync = require('child_process').execSync;
const path = require('path');

const async = require('async');

const globalData = require('../global_data');

/* 需要删除原生的 ios/android 文件夹 */
const INVALID_FOLDERS = [
    path.resolve(globalData.PROJECT_ROOT, 'ios'),
    path.resolve(globalData.PROJECT_ROOT, 'android')
];

module.exports = function (done) {
    async.eachSeries(INVALID_FOLDERS, function (folder, next) {
        try {
            execSync(`rm -rf ${folder}`);
        } catch (e) {
            /* delete ios/android native folder fail */
            return next(e);
        }

        next();
    }, done);
};
