/**
 * package json scripts init
 */
'use strict';

const fs = require('fs');

const globalData = require('../global_data.js');
const pkg = require(globalData.PROJECT_PACKAGE_JSON);

module.exports = function (done) {
    done = done || function () {};

    /**
     * 初始化的时候，react-native 默认版本号为 0.0.1，需要修改为 0.1.0
     */
    pkg.version = '0.1.0';

    /* eslint "dot-notation": "off" */
    pkg.scripts['i'] = 'npm install --registry=http://registry.npm.souche-inc.com';
    pkg.scripts['start'] = 'node ./node_modules/@souche-f2e/srn-toolchain/scripts/start.js';
    pkg.scripts['publish'] = 'node ./node_modules/@souche-f2e/srn-toolchain/scripts/publish.js';
    pkg.scripts['update'] = 'node ./node_modules/@souche-f2e/srn-toolchain/scripts/update.js';
    pkg.scripts['update-ios'] = 'node ./node_modules/@souche-f2e/srn-toolchain/scripts/update_ios.js';

    fs.writeFileSync(globalData.PROJECT_PACKAGE_JSON, JSON.stringify(pkg, null, 2), { encoding: 'utf8' });
    done();
};
